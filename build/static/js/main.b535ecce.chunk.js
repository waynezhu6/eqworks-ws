(this["webpackJsonpeqworks-ws"]=this["webpackJsonpeqworks-ws"]||[]).push([[0],{110:function(e,t,a){e.exports={body:"Visualizations_body__2wmhJ",hint:"Visualizations_hint__3vazc",charts:"Visualizations_charts__3mb-6"}},134:function(e,t,a){e.exports={table:"Table_table__1Ru1n",search:"Table_search__TAHGI"}},137:function(e,t,a){e.exports={marker:"Map_marker__1Krpr",cluster:"Map_cluster__2DgZL"}},172:function(e,t,a){e.exports={body:"App_body__3yTwm"}},178:function(e,t,a){e.exports={body:"Chart_body__2Ozn0"}},186:function(e,t,a){},188:function(e,t,a){},235:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=235},260:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(52),c=a.n(s),o=(a(186),a(19)),i=a.n(o),u=a(39),l=a(22),d=a(131),b=a(23),j=(a(188),a(172)),m=a.n(j),h=a(40),p=a.n(h),f=a(2),O=function(){var e=Object(b.g)(),t=Object(n.useState)(0),a=Object(l.a)(t,2),r=a[0],s=a[1];return Object(f.jsxs)("div",{className:p.a.body,children:[Object(f.jsx)("div",{className:p.a.title,children:"EQ Works - Work Sample"}),Object(f.jsx)("div",{className:p.a.subtitle,children:"Product Developer 2a - Frontend Track"}),Object(f.jsx)("div",{className:0==r?p.a.sLabel:p.a.label,onClick:function(){s(0),e.push("/visualizations")},children:"Visualizations"}),Object(f.jsx)("div",{className:1==r?p.a.sLabel:p.a.label,onClick:function(){s(1),e.push("/datatable")},children:"Data Table"}),Object(f.jsx)("div",{className:2==r?p.a.sLabel:p.a.label,onClick:function(){s(2),e.push("/map")},children:"Map"})]})},v=a(18),x=a(87),_=a(174),y=a(134),g=a.n(y),w=function(e,t,a){if(!(a=a.trim())||!a.length)return e;var n=a.split(" ");return n?n.reduceRight((function(e,a){return Object(_.a)(e,a,{keys:t.map((function(e){return"values."+e}))})}),e):e};w.autoRemove=function(e){return!e};var D=function(e){var t=e.config,a=e.data,r=e.visible,s=Object(n.useMemo)((function(){return t}),[]),c=Object(x.useTable)({columns:s,data:a,globalFilter:w},x.useGlobalFilter,x.useSortBy),o=c.getTableProps,i=c.getTableBodyProps,u=c.headerGroups,l=c.rows,d=c.prepareRow,b=c.state,j=c.preGlobalFilteredRows,m=c.setGlobalFilter;return Object(f.jsxs)("div",{style:r?{}:{display:"none"},children:[Object(f.jsx)(k,{preGlobalFilteredRows:j,globalFilter:b.globalFilter,setGlobalFilter:m}),Object(f.jsxs)("table",Object(v.a)(Object(v.a)({},o()),{},{className:g.a.table,children:[Object(f.jsx)("thead",{children:u.slice(1).map((function(e){return Object(f.jsx)("tr",Object(v.a)(Object(v.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(f.jsxs)("th",Object(v.a)(Object(v.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{children:[e.render("Header"),e.isSorted?e.isSortedDesc?" \u2b9d":" \u2b9f":" \u2b9e"]}))}))}))}))}),Object(f.jsx)("tbody",Object(v.a)(Object(v.a)({},i()),{},{children:l.map((function(e){return d(e),Object(f.jsx)("tr",Object(v.a)(Object(v.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(f.jsx)("td",Object(v.a)(Object(v.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]}))]})},k=function(e){var t=e.preGlobalFilteredRows,a=e.globalFilter,r=e.setGlobalFilter,s=t.length,c=Object(n.useState)(a),o=Object(l.a)(c,2),i=o[0],u=o[1],d=Object(x.useAsyncDebounce)((function(e){r(e||void 0)}),200);return Object(f.jsx)("div",{className:g.a.search,children:Object(f.jsx)("input",{value:i||"",onChange:function(e){u(e.target.value),d(e.target.value)},placeholder:"Search ".concat(s," rows (Hint: chain searches by space-seperating i.e. 2017 11AM)")})})},N=Object(n.memo)(D);function S(e){if(!e)return[];var t=e.poi,a=e.poi.length,n=e.events_hourly.map((function(e){var n,r,s=(n=0,r=a,Math.floor(Math.random()*(r-n)+n));return Object(v.a)(Object(v.a)(Object(v.a)({},e),t[s]),F(e.date))}));e.all_events=n.reverse()}function H(e){if(!e)return[];var t=e.stats_hourly.map((function(e){return Object(v.a)(Object(v.a)({},e),F(e.date))}));e.stats_hourly=t.reverse()}function T(e){var t=e.poi.map((function(e){return{type:"Feature",id:e.poi_id,name:e.name,properties:{cluster:!1},geometry:{type:"Point",coordinates:[e.lon,e.lat]}}}));e.markers=t}function C(e){e.events_hourly.map((function(e){var t=new Date(e.date);t.setHours(t.getHours()+e.hour),e.date=t.toISOString(),e.hour=M(e.hour)})),e.stats_hourly.map((function(e){var t=new Date(e.date);t.setHours(t.getHours()+e.hour),e.date=t.toISOString(),e.hour=M(e.hour)})),e.all_events.map((function(e){var t=new Date(e.date);t.setHours(t.getHours()+e.hour),e.date=t.toISOString(),e.hour=M(e.hour)}))}function F(e){var t=new Date(e);return{year:t.toLocaleString("en-US",{year:"numeric"}),month:t.toLocaleString("en-US",{month:"long"}),day:t.toLocaleString("en-US",{day:"numeric"}),weekday:t.toLocaleString("en-US",{weekday:"long"})}}function M(e){var t=e<12?"PM":"AM";return"".concat(e%12||12).concat(t)}function I(e){e.events_hourly.sort((function(e,t){return new Date(e.date)-new Date(t.date)})),e.events_daily.sort((function(e,t){return new Date(e.date)-new Date(t.date)})),e.stats_hourly.sort((function(e,t){return new Date(e.date)-new Date(t.date)})),e.stats_daily.sort((function(e,t){return new Date(e.date)-new Date(t.date)}))}var Z=a(72),L=a.n(Z),z=[{columns:[{id:"0",Header:"",columns:[{Header:"Year",accessor:"year"},{Header:"Month",accessor:"month"},{Header:"Date",accessor:"day"},{Header:"Day",accessor:"weekday"},{Header:"Time",accessor:"hour"},{Header:"Location",accessor:"name"}]}],field:"all_events"},{columns:[{id:"1",Header:"",columns:[{Header:"Year",accessor:"year"},{Header:"Month",accessor:"month"},{Header:"Date",accessor:"day"},{Header:"Day",accessor:"weekday"},{Header:"Time",accessor:"hour"},{Header:"Impressions",accessor:"impressions"},{Header:"Clicks",accessor:"clicks"},{Header:"Revenue",accessor:"revenue"}]}],field:"stats_hourly"},{columns:[{id:"2",Header:"",columns:[{Header:"ID",accessor:"poi_id"},{Header:"Name",accessor:"name"}]}],field:"poi"}],A=function(e){var t=e.data,a=Object(n.useState)(0),r=Object(l.a)(a,2),s=r[0],c=r[1];return Object(f.jsxs)("div",{className:L.a.body,children:[Object(f.jsx)("div",{className:L.a.navbar,children:["Events","Stats","Points of Interest"].map((function(e,t){return Object(f.jsx)("div",{onClick:function(){return c(t)},className:s==t?L.a.selected:"",children:e},t)}))}),Object(f.jsx)("div",{className:L.a.search}),Object(f.jsx)("div",{className:L.a.table,children:z.map((function(e,a){return Object(f.jsx)(N,{config:e.columns,data:t[e.field],visible:s==a},a)}))})]})},R=a(89),P=(a(204),a(180)),E=a(135),G=a.n(E),Y=a(42),B=a.n(Y),U=a(47),V=a.n(U),J=function(e){var t=e.selected,a=e.results,n=e.from,r=e.to,s=e.setDates,c=t.name?a[t.name].length+" events in range":"",o=t.name?"Last: "+B()(a[t.name][0].date).format("MMMM Do, YYYY - h A"):"";return Object(f.jsx)("div",{className:V.a.body,children:Object(f.jsxs)("div",{className:V.a.filter,children:[Object(f.jsx)("div",{className:V.a.title,children:"Filter Events"}),Object(f.jsxs)("div",{className:V.a.picker,children:[Object(f.jsx)("span",{children:"From: "}),Object(f.jsx)(G.a,{onChange:function(e){return s(e,!0)},value:n,maxDate:r})]}),Object(f.jsxs)("div",{className:V.a.picker,children:[Object(f.jsx)("span",{children:"To: "}),Object(f.jsx)(G.a,{onChange:function(e){return s(e,!1)},value:r,minDate:n})]}),Object(f.jsx)("div",{className:V.a.name,children:t.name}),Object(f.jsx)("div",{className:V.a.field,children:c}),Object(f.jsx)("div",{className:V.a.field,children:o})]})})},W=a(137),Q=a.n(W);var q=function(e,t,a){var n={};return e.all_events.map((function(e){var r=new Date(e.date);t<=r&&r<=a&&(e.name in n?n[e.name].push(e):n[e.name]=[e])})),n},K=function(e){var t=e.data,a=Object(n.useRef)(),r=Object(n.useState)({width:"100%",height:"100%",longitude:-79.3971,latitude:43.6597,zoom:8}),s=Object(l.a)(r,2),c=s[0],o=s[1];Object(n.useEffect)((function(){var e=function(){return o(c)};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]);var i=Object(n.useState)({}),u=Object(l.a)(i,2),d=u[0],b=u[1],j=Object(n.useState)(new Date("12/31/2016")),m=Object(l.a)(j,2),h=m[0],p=m[1],O=Object(n.useState)(new Date("02/01/2017")),x=Object(l.a)(O,2),_=x[0],y=x[1],g=Object(n.useState)(q(t,h,_)),w=Object(l.a)(g,2),D=w[0],k=w[1],N=t.markers,S=a.current?a.current.getMap().getBounds().toArray().flat():[],H=Object(P.a)({points:N,bounds:S,zoom:c.zoom,options:{radius:75,maxZoom:16}}),T=H.clusters,C=H.supercluster;return Object(f.jsxs)("div",{style:{flex:1},children:[Object(f.jsx)(J,{selected:d,results:D,from:h,to:_,setDates:function(e,a){a?(p(e),k(q(t,e,_))):(y(e),k(q(t,h,e)))}}),Object(f.jsx)(R.c,Object(v.a)(Object(v.a)({},c),{},{minZoom:1,maxZoom:16,onViewportChange:function(e){return o(e)},mapboxApiAccessToken:"pk.eyJ1Ijoid2F5bmV6IiwiYSI6ImNrbDdmN3BtcTJteWsyb3BsNGt0YmpnZmYifQ.A-To5_8sa_6FqSTUW5TG1g",ref:a,children:T.map((function(e,t){var a=Object(l.a)(e.geometry.coordinates,2),n=a[0],r=a[1];return e.properties.cluster?Object(f.jsx)(R.b,{longitude:n,latitude:r,children:Object(f.jsxs)("div",{className:Q.a.cluster,onClick:function(){var t=C.getClusterExpansionZoom(e.id);o(Object(v.a)(Object(v.a)({},c),{},{latitude:r,longitude:n,zoom:t,transitionInterpolator:new R.a({speed:1,curve:3}),transitionDuration:"auto"}))},children:["*",e.properties.point_count," Locations"]})},t):Object(f.jsx)(R.b,{longitude:n,latitude:r,children:Object(f.jsxs)("div",{className:Q.a.marker,onClick:function(){b(e)},children:[e.name," - ",D[e.name].length]})},t)}))}))]})},X=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee();case 2:return e.t0=e.sent,e.next=5,te();case 5:return e.t1=e.sent,e.next=8,ae();case 8:return e.t2=e.sent,e.next=11,ne();case 11:return e.t3=e.sent,e.next=14,re();case 14:return e.t4=e.sent,e.abrupt("return",{events_daily:e.t0,events_hourly:e.t1,stats_daily:e.t2,stats_hourly:e.t3,poi:e.t4});case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(u.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://sprinkle-defiant-schooner.glitch.me/api"+t).then((function(e){return e.json()}));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$("/events/daily");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$("/events/hourly");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$("/stats/daily");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$("/stats/hourly");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$("/poi");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),se=a(179),ce=a.n(se),oe=a(57),ie=a(26),ue=a(178),le=a.n(ue),de=function(e){var t=e.dataZoomedOut,a=e.dataZoomedIn,r=e.field,s=e.title,c=e.label,o=e.max,i=e.maxZoom,u=function(e,t){return new ie.TimeSeries({name:"id_"+r,columns:["index","value"],points:e.map((function(e){return[ie.Index.getIndexString(t,new Date(e.date)),e[r].toString()]}))})},d=Object(n.useState)(),b=Object(l.a)(d,2),j=b[0],m=b[1],h=Object(n.useState)(!1),p=Object(l.a)(h,2),O=p[0],v=p[1],x=Object(n.useState)(u(t,"1d")),_=Object(l.a)(x,2),y=_[0],g=_[1],w=Object(n.useState)(y.range()),D=Object(l.a)(w,2),k=D[0],N=D[1],S=Object(oe.styler)([{key:"value",color:"#D6D6D6",highlight:"#A3A3A3"}]),H=[];j&&(H=[{label:c,value:j.event.get(j.column)}],(c="Revenue")&&(H=[{label:c,value:parseInt(j.event.get(j.column)).toFixed(2)}]));return Object(f.jsx)("div",{className:le.a.body,children:Object(f.jsx)(oe.Resizable,{children:Object(f.jsx)(oe.ChartContainer,{utc:!0,timeAxisTickCount:6,timeRange:k,title:s,enablePanZoom:!0,onTimeRangeChanged:function(e){e.duration()<432e6&&!O?(v(!0),g(u(a,"1h"))):e.duration()>=432e6&&O&&(v(!1),g(u(t,"1d"))),N(e)},minTime:new Date("12/31/2016"),maxTime:new Date("02/11/2017"),children:Object(f.jsxs)(oe.ChartRow,{height:"300",children:[Object(f.jsx)(oe.YAxis,{id:"id_"+r,label:"Number of"+c,min:0,max:O?i:o,width:"70",type:"linear"}),Object(f.jsx)(oe.Charts,{children:Object(f.jsx)(oe.BarChart,{axis:"id_"+r,style:S,columns:["value"],series:y,highlighted:j,onHighlightChange:function(e){return m(e)},info:H,infoTimeFormat:function(e){return B()(e.begin()).format("MMM Do 'YY")}})})]})})})})},be=a(110),je=a.n(be),me=function(e){var t=e.data;return console.log(t),Object(f.jsxs)("div",{className:je.a.body,children:[Object(f.jsx)("div",{className:je.a.hint,children:"Hint: scroll in on charts to view higher resolution data. Click and drag to move viewport."}),Object(f.jsxs)("div",{className:je.a.charts,children:[Object(f.jsx)(de,{dataZoomedIn:t.stats_hourly,dataZoomedOut:t.stats_daily,title:"Daily Impressions",field:"impressions",label:"Impressions",max:3e6,maxZoom:18e4}),Object(f.jsx)(de,{dataZoomedIn:t.stats_hourly,dataZoomedOut:t.stats_daily,title:"Daily Revenue",field:"revenue",label:"Revenue",max:14e3,maxZoom:1e3}),Object(f.jsx)(de,{dataZoomedIn:t.stats_hourly,dataZoomedOut:t.stats_daily,title:"Daily Clicks",field:"clicks",label:"Clicks",max:4e3,maxZoom:350}),Object(f.jsx)(de,{dataZoomedIn:t.events_hourly,dataZoomedOut:t.events_daily,title:"Daily Events",field:"events",label:"Events",max:80,maxZoom:20})]})]})},he=function(){var e=Object(n.useState)(null),t=Object(l.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){(function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:S(t=e.sent),H(t),T(t),C(t),I(t),r(t),console.log(t);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(f.jsx)(d.a,{children:Object(f.jsx)("div",{className:m.a.body,children:a?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(O,{}),Object(f.jsxs)(b.d,{children:[Object(f.jsx)(b.b,{path:"/visualizations",children:Object(f.jsx)(me,{data:a})}),Object(f.jsx)(b.b,{path:"/datatable",children:Object(f.jsx)(A,{data:a})}),Object(f.jsx)(b.b,{path:"/map",children:Object(f.jsx)(K,{data:a})}),Object(f.jsx)(b.a,{to:"/visualizations"})]})]}):Object(f.jsx)(ce.a,{size:60,css:{margin:"auto",transform:"translateY(30vh)"},color:"#959595"})})})},pe=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,264)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),s(e),c(e)}))};c.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(he,{})}),document.getElementById("root")),pe()},40:function(e,t,a){e.exports={body:"Navbar_body__7hNhW",title:"Navbar_title__20Xld",subtitle:"Navbar_subtitle__16Zjr",label:"Navbar_label__3Qvkh",sLabel:"Navbar_sLabel__3H4Ds"}},47:function(e,t,a){e.exports={body:"MapOverlay_body___L1dF",filter:"MapOverlay_filter__LfLaP",title:"MapOverlay_title__1JaFQ",picker:"MapOverlay_picker__250G_",name:"MapOverlay_name__2FDAw",field:"MapOverlay_field__1zb_I"}},72:function(e,t,a){e.exports={body:"DataTable_body__3Bg7L",navbar:"DataTable_navbar__2A7Ai",selected:"DataTable_selected__usNDV",table:"DataTable_table__3ZT97"}}},[[260,1,2]]]);
//# sourceMappingURL=main.b535ecce.chunk.js.map